<section class="content">
  <div class="row">
    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
      <mat-card>
        <mat-card-content>
          <div class="row" style="margin: 20px 0">
                <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12" style="margin-top: 3%;">
                  <mat-card>
                    <mat-card-header>
                      <mat-card-subtitle>IDENTIFICATION</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                      <div class="row">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Matricule : </strong>
                          {{inscription ? inscription.etudiant ?
                          inscription.etudiant.matricule ?
                            inscription.etudiant.matricule : '' : '' : '' }}
                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Nom : </strong>
                          {{inscription ? inscription.etudiant ?
                          inscription.etudiant.nom ?
                            inscription.etudiant.nom : '' : '' : '' }}
                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Prenom : </strong>
                          {{inscription ? inscription.etudiant ?
                          inscription.etudiant.prenom ?
                            inscription.etudiant.prenom : '' : '' : '' }}
                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Téléphone : </strong>
                          {{inscription ? inscription.etudiant ?
                          inscription.etudiant.telephone ?
                            inscription.etudiant.telephone : '' : '' : '' }}
                        </div>
                      </div>
                    </mat-card-content>
                  </mat-card>
                </div>

                <div class="col-md-6 col-lg-6 col-sm-12 col-xs-12" style="margin-top: 3%;">
                  <mat-card>
                    <mat-card-header>
                      <mat-card-subtitle>Information Classe</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                      <div class="row">
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Année scolaire : </strong>
                          {{inscription ? inscription.anneeScolaire ?
                          inscription.anneeScolaire.libelle ?
                            inscription.anneeScolaire.libelle : '' : '' : '' }}
                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Classe : </strong>
                          {{inscription ? inscription.sousClasse ?
                          inscription.sousClasse.libelle ?
                            inscription.sousClasse.libelle : '' : '' : '' }}
                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Niveau : </strong>
                          {{inscription ? inscription.sousClasse ?
                          inscription.sousClasse.niveau ?
                            inscription.sousClasse.niveau.libelle : '' : '' : '' }}
                        </div>
                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                          <strong>Specialité : </strong>
                          {{inscription ? inscription.sousClasse ?
                          inscription.sousClasse.specialite ?
                            inscription.sousClasse.specialite.libelle : '' : '' : '' }}
                        </div>
                      </div>
                    </mat-card-content>
                  </mat-card>
                </div>
          </div>

          <div class="row" style="margin: 20px 0">
            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
              <div class="form-group row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <mat-form-field class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <mat-label>Session :</mat-label>
                    <mat-select name="session" [(ngModel)]="sessionModel" (selectionChange)="onSelectedSession($event)">
                      <mat-option *ngFor="let session of sessionList" [value]="session" >{{ session?.name }}</mat-option >
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
            </div>
          </div>
          <div class="row" style="margin: 20px 0">
            <button type="button" class="action-button"
                    [disabled]="!isNoteRemplacementok"
                    (click)="valideNote()"
                    mat-raised-button>
              Valider <em class="fa fa-save fa-lg"></em>
            </button>
          </div>
          <div class="mat-elevation-z8">
            <table mat-table
                   [dataSource]="dataSource"
                   multiTemplateDataRows>
              <!-- moduleEtudiant column -->
              <ng-container matColumnDef="moduleEtudiant">
                <th mat-header-cell *matHeaderCellDef> Modules</th>
                <td mat-cell *matCellDef="let npm">
                  {{
                  npm ? npm.programmeModule.module.libelle : ''
                  }}
                </td>
              </ng-container>



              <!-- moyenneDevoirsEtudiant column -->
              <ng-container matColumnDef="moyenneDevoirsEtudiant">
                <th mat-header-cell *matHeaderCellDef> Moyenne Devoirs</th>
                <td mat-cell *matCellDef="let npm">
                  <mat-form-field class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <mat-label>Note : </mat-label>
                    <input name="notedevoirEtudiant" disabled
                           [(ngModel)]="npm.note.mds" matInput/>
                    <button  mat-button matSuffix mat-stroked-button
                             (click)="onAddNoteDevoir(npm.note)"
                             type="button" class="action-button">
                      <i class="fa fa-plus-square-o"></i>
                    </button>
                  </mat-form-field>
                </td>
              </ng-container>

              <!-- examEtudiant column -->
              <ng-container matColumnDef="examEtudiant">
                <th mat-header-cell *matHeaderCellDef> Examen Final</th>
                <td mat-cell *matCellDef="let npm">
                  <mat-form-field class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <mat-label>Note : </mat-label>
                    <input name="noteexamenEtudiant"
                           [style]="npm.styleNoteOnRemplacement"
                           (keyup)="onChangeNoteExam(npm, $event)"
                           [(ngModel)]="npm.note.nef" matInput/>
                  </mat-form-field>
                  <h5 class="text-danger">{{npm.errorMessage}}</h5>
                </td>
              </ng-container>

              <!-- sessionEtudiant column -->
              <ng-container matColumnDef="sessionEtudiant">
                <th mat-header-cell *matHeaderCellDef> Session</th>
                <td mat-cell *matCellDef="let inscription">
                  <mat-checkbox name="sessionEtudiant" color="primary"
                                [checked]="isNoteRemplacement"
                                [disabled]="isNoteRemplacement"
                                [value]="inscription"
                                class="example-margin"
                                (change)="onSelectedNoteSession($event, inscription)" >
                    Note session normale
                  </mat-checkbox>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="etudiantNoteColumnsToDisplay"></tr>
              <tr mat-row *matRowDef="let element; columns: etudiantNoteColumnsToDisplay;"
                  class="example-element-row">
              </tr>
            </table>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>


  <div #showDevoirModal class="modal fade" id="showDevoirModal" tabindex="-1" role="dialog"
       aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" (click)="onDismissModal()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ng-container *ngIf="listDevoirs && listDevoirs.length > 0 && mdsNote">
            <app-devoirs-list [listDevoirs]="listDevoirs" [note]="mdsNote"></app-devoirs-list>
          </ng-container>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="onDismissModal()">Fermer</button>
        </div>
      </div>
    </div>
  </div>
</section>
